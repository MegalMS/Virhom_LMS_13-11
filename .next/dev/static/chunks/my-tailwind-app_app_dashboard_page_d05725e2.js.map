{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pc/Desktop/LMS-Front%20Site/my-tailwind-app/app/dashboard/page.js"],"sourcesContent":["\"use client\";\r\nimport { useSession, signOut } from \"next-auth/react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function Dashboard() {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // ✅ Redirect unauthenticated users\r\n  useEffect(() => {\r\n    if (status === \"loading\") return;\r\n\r\n    if (!session) {\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // ✅ Wait for backendUser data to be available\r\n    if (session?.backendUser) {\r\n      setIsLoading(false);\r\n    } else {\r\n      // If backendUser is not available yet, wait a bit\r\n      const timer = setTimeout(() => {\r\n        setIsLoading(false);\r\n      }, 1000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [session, status, router]);\r\n\r\n  // ✅ Handle loading states\r\n  if (status === \"loading\" || isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#fffbeb] flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A27B5C] mx-auto\"></div>\r\n          <p className=\"mt-4 text-[#6B4F4F]\">Loading your dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ✅ Handle unauthenticated\r\n  if (!session) {\r\n    return null;\r\n  }\r\n\r\n  const backendUser = session?.backendUser;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#fffbeb] p-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <div className=\"bg-white rounded-xl shadow-lg p-8\">\r\n          <h1 className=\"text-3xl font-bold text-[#3E2723] mb-6\">Dashboard</h1>\r\n\r\n          {backendUser ? (\r\n            <div className=\"bg-[#FFFDF6] border border-[#E9DCCF] rounded-lg p-6 mb-6\">\r\n              <h2 className=\"text-xl font-semibold text-[#6B4F4F] mb-4\">\r\n                User Information\r\n              </h2>\r\n              <div className=\"space-y-2\">\r\n                <p>\r\n                  <strong>Name:</strong> {backendUser.name}\r\n                </p>\r\n                <p>\r\n                  <strong>Email:</strong> {backendUser.email}\r\n                </p>\r\n                <p>\r\n                  <strong>Role:</strong> {backendUser.role}\r\n                </p>\r\n                {backendUser.profileImage && (\r\n                  <Image\r\n                    src={backendUser.profileImage}\r\n                    alt=\"Profile Image\"\r\n                    width={100}\r\n                    height={100}\r\n                    className=\"rounded-full mt-4\"\r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6\">\r\n              <p className=\"text-yellow-800\">\r\n                User data is still loading. If this persists, please try refreshing the page.\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          <button\r\n            onClick={() => signOut({ callbackUrl: \"/login\" })}\r\n            className=\"bg-[#6B4F4F] text-white px-6 py-2 rounded-md hover:bg-[#5A4038] transition-colors\"\r\n          >\r\n            Sign Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAMe,SAAS;;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,wLAAU;IAC5C,MAAM,SAAS,IAAA,2KAAS;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kMAAQ,EAAC;IAE3C,mCAAmC;IACnC,IAAA,mMAAS;+BAAC;YACR,IAAI,WAAW,WAAW;YAE1B,IAAI,CAAC,SAAS;gBACZ,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,8CAA8C;YAC9C,IAAI,SAAS,aAAa;gBACxB,aAAa;YACf,OAAO;gBACL,kDAAkD;gBAClD,MAAM,QAAQ;iDAAW;wBACvB,aAAa;oBACf;gDAAG;gBACH;2CAAO,IAAM,aAAa;;YAC5B;QACF;8BAAG;QAAC;QAAS;QAAQ;KAAO;IAE5B,0BAA0B;IAC1B,IAAI,WAAW,aAAa,WAAW;QACrC,qBACE,sNAAC;YAAI,WAAU;sBACb,cAAA,sNAAC;gBAAI,WAAU;;kCACb,sNAAC;wBAAI,WAAU;;;;;;kCACf,sNAAC;wBAAE,WAAU;kCAAsB;;;;;;;;;;;;;;;;;IAI3C;IAEA,2BAA2B;IAC3B,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,MAAM,cAAc,SAAS;IAE7B,qBACE,sNAAC;QAAI,WAAU;kBACb,cAAA,sNAAC;YAAI,WAAU;sBACb,cAAA,sNAAC;gBAAI,WAAU;;kCACb,sNAAC;wBAAG,WAAU;kCAAyC;;;;;;oBAEtD,4BACC,sNAAC;wBAAI,WAAU;;0CACb,sNAAC;gCAAG,WAAU;0CAA4C;;;;;;0CAG1D,sNAAC;gCAAI,WAAU;;kDACb,sNAAC;;0DACC,sNAAC;0DAAO;;;;;;4CAAc;4CAAE,YAAY,IAAI;;;;;;;kDAE1C,sNAAC;;0DACC,sNAAC;0DAAO;;;;;;4CAAe;4CAAE,YAAY,KAAK;;;;;;;kDAE5C,sNAAC;;0DACC,sNAAC;0DAAO;;;;;;4CAAc;4CAAE,YAAY,IAAI;;;;;;;oCAEzC,YAAY,YAAY,kBACvB,sNAAC,oKAAK;wCACJ,KAAK,YAAY,YAAY;wCAC7B,KAAI;wCACJ,OAAO;wCACP,QAAQ;wCACR,WAAU;;;;;;;;;;;;;;;;;6CAMlB,sNAAC;wBAAI,WAAU;kCACb,cAAA,sNAAC;4BAAE,WAAU;sCAAkB;;;;;;;;;;;kCAMnC,sNAAC;wBACC,SAAS,IAAM,IAAA,qLAAO,EAAC;gCAAE,aAAa;4BAAS;wBAC/C,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;GA/FwB;;QACY,wLAAU;QAC7B,2KAAS;;;KAFF","debugId":null}}]
}