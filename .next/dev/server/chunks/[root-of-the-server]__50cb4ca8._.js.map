{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pc/Desktop/LMS-Front%20Site/my-tailwind-app/app/api/auth/%5B...nextauth%5D/route.js"],"sourcesContent":["import NextAuth from \"next-auth\";\r\nimport GoogleProvider from \"next-auth/providers/google\";\r\n\r\n\r\nexport const authOptions = {\r\n  providers: [\r\n    GoogleProvider({\r\n      clientId: process.env.GOOGLE_CLIENT_ID,\r\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET,\r\n    }),\r\n  ],\r\n  callbacks: {\r\n    async jwt({ token, account, profile }) {\r\n      // Initial sign in\r\n      if (account && profile) {\r\n        try {\r\n          // Send Google token to your backend\r\n          const backendResponse = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/auth/google`, {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n              token: account.id_token,\r\n              role: \"member\", // You can make this dynamic\r\n            }),\r\n          });\r\n\r\n          if (backendResponse.ok) {\r\n            const backendData = await backendResponse.json();\r\n            token.backendToken = backendData.token;\r\n            token.backendUser = backendData.user;\r\n          } else {\r\n            console.error(\"Backend auth failed:\", await backendResponse.text());\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Backend authentication error:\", error);\r\n        }\r\n      }\r\n      return token;\r\n    },\r\n    async session({ session, token }) {\r\n      session.backendToken = token.backendToken;\r\n      session.backendUser = token.backendUser;\r\n      return session;\r\n    },\r\n  },\r\n  pages: {\r\n    signIn: \"/login\",\r\n    error: \"/login\",\r\n  },\r\n  debug: process.env.NODE_ENV === \"development\",\r\n  secret: process.env.NEXTAUTH_SECRET,\r\n};\r\n\r\nconst handler = NextAuth(authOptions);\r\nexport { handler as GET, handler as POST };"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAGO,MAAM,cAAc;IACzB,WAAW;QACT,IAAA,yLAAc,EAAC;YACb,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAChD;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE;YACnC,kBAAkB;YAClB,IAAI,WAAW,SAAS;gBACtB,IAAI;oBACF,oCAAoC;oBACpC,MAAM,kBAAkB,MAAM,MAAM,6DAAmC,gBAAgB,CAAC,EAAE;wBACxF,QAAQ;wBACR,SAAS;4BACP,gBAAgB;wBAClB;wBACA,MAAM,KAAK,SAAS,CAAC;4BACnB,OAAO,QAAQ,QAAQ;4BACvB,MAAM;wBACR;oBACF;oBAEA,IAAI,gBAAgB,EAAE,EAAE;wBACtB,MAAM,cAAc,MAAM,gBAAgB,IAAI;wBAC9C,MAAM,YAAY,GAAG,YAAY,KAAK;wBACtC,MAAM,WAAW,GAAG,YAAY,IAAI;oBACtC,OAAO;wBACL,QAAQ,KAAK,CAAC,wBAAwB,MAAM,gBAAgB,IAAI;oBAClE;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,iCAAiC;gBACjD;YACF;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,QAAQ,YAAY,GAAG,MAAM,YAAY;YACzC,QAAQ,WAAW,GAAG,MAAM,WAAW;YACvC,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;QACR,OAAO;IACT;IACA,OAAO,oDAAyB;IAChC,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC;AAEA,MAAM,UAAU,IAAA,2KAAQ,EAAC","debugId":null}}]
}